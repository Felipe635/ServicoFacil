<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.w3.org/1999/xhtml">
<head th:replace="fragments :: head-login">

    <script th:src="@{/js/main.js}"></script>
</head>
<body>

<div th:replace="fragments :: menu-cadastro" ></div>

<div class="containerr">

    <form class="formulario" id="loginForm" th:action="@{/login/logged}" th:object="${login}" method="post">
        <h2 class="titulo-form">LOGIN</h2>

        <div class="form-floating mb-3 row">
            <input type="text" name="login" class="form-control" id="floatingInput" placeholder="name@example.com">
            <label for="floatingInput">Login</label>
        </div>
        <div class="form-floating row">
            <input type="password" name="password" class="form-control" id="floatingPassword" placeholder="Password">
            <label for="floatingPassword">Senha</label>
        </div>
        <button class="botao-form" form="loginForm" type="submit">Login</button>
        <a href="/user/register-view" class="link">Cadastre-se</a>
    </form>
</div>

<div th:replace="fragments :: footer" ></div>

//<script>
//    document.getElementById('loginForm').addEventListener('submit', function(event) {
//            event.preventDefault();
//
//            const apiUrl = 'http://localhost:8080/login/logged';
//            const login = document.getElementById('floatingInput').value;
//            const password = document.getElementById('floatingPassword').value;
//
//            const user = {
//                login: login,
//                password: password
//            };
//
//            fetch(apiUrl, {
//                method: 'POST',
//                headers: {
//                    'Content-Type': 'application/json'
//                },
//                body: JSON.stringify(user)
//            })
//            .then(response => {
//                if (!response.ok) {
//                    throw new Error('Network response was not ok');
//                }
//                return response.json();
//            })
//            .then(data => {
//                const jwtToken = data.token;
//                localStorage.setItem('jwtToken', jwtToken);
//                location.href = "http://localhost:8080/nav-bar"
//            })
//            .catch(error => {
//                console.error('Error:', error);
//            });
//        });
//
//</script>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js" integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+" crossorigin="anonymous"></script>
</body>
</html>